import{a as A}from"./chunk-VBEBLBJG.js";import{A as _,D as M,E as h,H as b,J as u,L as C,M as i,N as e,Q as O,R as k,T as n,U as d,V as p,X as S,Y as l,Z as f,_ as E,e as m,ea as I,fa as $,ga as w,ha as D,ia as v,m as x,oa as T,ra as y,sa as F,z as o}from"./chunk-B74SACQF.js";import"./chunk-EQDQRRRY.js";var L=r=>["/project",r];function R(r,s){r&1&&(i(0,"button",13),n(1," Create Project "),e())}function z(r,s){if(r&1&&(i(0,"div",14)(1,"div",15)(2,"h3"),n(3),e(),i(4,"span",16),n(5),e()(),i(6,"div",17)(7,"p")(8,"strong"),n(9,"Team:"),e(),n(10),e(),i(11,"p")(12,"strong"),n(13,"Tasks:"),e(),n(14),e(),i(15,"p")(16,"strong"),n(17,"Updated:"),e(),n(18),l(19,"date"),e()(),i(20,"div",18)(21,"button",19),n(22," View Details "),e()()()),r&2){let t=s.$implicit;o(3),d(t.name),o(),C(t.status),o(),p(" ",t.status," "),o(5),p(" ",t.team,""),o(4),p(" ",t.tasks.length,""),o(4),p(" ",E(19,8,t.updatedAt,"short"),""),o(3),u("routerLink",S(11,L,t.id))}}function V(r,s){if(r&1&&(i(0,"div",23)(1,"span",24),n(2),e(),i(3,"span",25),n(4),e(),i(5,"span",16),n(6),e()()),r&2){let t=s.$implicit;o(2),d(t.jiraId),o(2),d(t.description),o(),C(t.status),o(),p(" ",t.status," ")}}function W(r,s){if(r&1&&(i(0,"section",20)(1,"h2"),n(2,"Your Tasks"),e(),i(3,"div",21),b(4,V,7,5,"div",22),l(5,"async"),e()()),r&2){let t=k();o(4),u("ngForOf",f(5,1,t.recentTasks$))}}var j=class r{constructor(s,t){this.authService=s;this.projectService=t;this.currentUser=this.authService.getCurrentUser(),this.projects$=this.projectService.getProjects(),this.totalProjects$=this.projects$.pipe(m(a=>a.length)),this.activeProjects$=this.projects$.pipe(m(a=>a.filter(c=>c.status==="active").length)),this.completedProjects$=this.projects$.pipe(m(a=>a.filter(c=>c.status==="completed").length)),this.recentProjects$=this.projects$.pipe(m(a=>[...a].sort((c,g)=>new Date(g.updatedAt).getTime()-new Date(c.updatedAt).getTime()).slice(0,6))),this.recentTasks$=this.projects$.pipe(m(a=>a.flatMap(g=>g.tasks).sort((g,B)=>new Date(B.updatedAt).getTime()-new Date(g.updatedAt).getTime()).slice(0,5)))}currentUser;projects$;totalProjects$;activeProjects$;completedProjects$;recentProjects$;recentTasks$;ngOnInit(){}isProjectManager(){return this.currentUser?.role==="project-manager"}isDeveloper(){return this.currentUser?.role==="dev"}logout(){this.authService.logout(),window.location.href="/auth/login"}static \u0275fac=function(t){return new(t||r)(_(F),_(A))};static \u0275cmp=M({type:r,selectors:[["app-dashboard"]],decls:35,vars:15,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"btn","btn-logout",3,"click"],[1,"dashboard-stats"],[1,"stat-card"],[1,"stat-value"],[1,"dashboard-content"],[1,"recent-projects"],[1,"section-header"],["class","btn btn-primary","routerLink","/project/create",4,"ngIf"],[1,"project-grid"],["class","project-card",4,"ngFor","ngForOf"],["class","task-summary",4,"ngIf"],["routerLink","/project/create",1,"btn","btn-primary"],[1,"project-card"],[1,"project-header"],[1,"status-badge"],[1,"project-info"],[1,"project-footer"],[1,"btn","btn-primary",3,"routerLink"],[1,"task-summary"],[1,"task-list"],["class","task-item",4,"ngFor","ngForOf"],[1,"task-item"],[1,"jira-id"],[1,"task-desc"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"header",1)(2,"h1"),n(3),e(),i(4,"button",2),O("click",function(){return a.logout()}),n(5,"Logout"),e()(),i(6,"div",3)(7,"div",4)(8,"h3"),n(9,"Total Projects"),e(),i(10,"div",5),n(11),l(12,"async"),e()(),i(13,"div",4)(14,"h3"),n(15,"Active Projects"),e(),i(16,"div",5),n(17),l(18,"async"),e()(),i(19,"div",4)(20,"h3"),n(21,"Completed Projects"),e(),i(22,"div",5),n(23),l(24,"async"),e()()(),i(25,"div",6)(26,"section",7)(27,"div",8)(28,"h2"),n(29,"Recent Projects"),e(),b(30,R,2,0,"button",9),e(),i(31,"div",10),b(32,z,23,13,"div",11),l(33,"async"),e()(),b(34,W,6,3,"section",12),e()()),t&2&&(o(3),p("Welcome, ",a.currentUser==null?null:a.currentUser.username,""),o(8),d(f(12,7,a.totalProjects$)||0),o(6),d(f(18,9,a.activeProjects$)||0),o(6),d(f(24,11,a.completedProjects$)||0),o(7),u("ngIf",a.isProjectManager()),o(2),u("ngForOf",f(33,13,a.recentProjects$)),o(2),u("ngIf",a.isDeveloper()))},dependencies:[v,I,$,w,D,T],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px;max-width:1400px;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.dashboard-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 10px #0000001a;text-align:center}.stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#007bff}.dashboard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:30px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.project-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.project-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 10px #0000001a}.project-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.875rem}.status-badge.active[_ngcontent-%COMP%]{background:#28a745;color:#fff}.status-badge.completed[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.status-badge.on-hold[_ngcontent-%COMP%]{background:#ffc107;color:#000}.task-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.task-item[_ngcontent-%COMP%]{background:#fff;border-radius:4px;padding:15px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 5px #0000000d}.jira-id[_ngcontent-%COMP%]{font-weight:700;color:#0052cc}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-logout[_ngcontent-%COMP%]{background:#dc3545;color:#fff}@media (max-width: 1024px){.dashboard-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.dashboard-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Y=[{path:"",component:j}],P=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=h({type:r});static \u0275inj=x({imports:[y.forChild(Y),y]})};var U=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=h({type:r});static \u0275inj=x({imports:[v,P]})};export{U as DashboardModule};
