import './polyfills.server.mjs';
import{a as y,b as u,c as P,d as I,f as E,h as O,i as F,j as q,k as D,l as G,m as N,n as k}from"./chunk-AMAFKVBD.mjs";import{$ as c,M as a,N as p,Na as C,Q as x,Qa as g,R as _,U as s,_ as m,ba as n,ca as t,cb as S,da as f,db as M,fa as h,ga as l,gb as A,hb as w,ia as o,ka as v,m as b}from"./chunk-UBIDB7VR.mjs";import"./chunk-S6KH3LOX.mjs";function Q(e,d){e&1&&(n(0,"div"),o(1,"Username is required"),t())}function W(e,d){if(e&1&&(n(0,"div",15),s(1,Q,2,0,"div",16),t()),e&2){let r=l();a(),m("ngIf",r.f.username.errors==null?null:r.f.username.errors.required)}}function X(e,d){e&1&&(n(0,"div"),o(1,"Password is required"),t())}function Y(e,d){if(e&1&&(n(0,"div",15),s(1,X,2,0,"div",16),t()),e&2){let r=l();a(),m("ngIf",r.f.password.errors==null?null:r.f.password.errors.required)}}function Z(e,d){e&1&&f(0,"span",17)}function $(e,d){if(e&1&&(n(0,"div",18),o(1),t()),e&2){let r=l();a(),v(" ",r.error," ")}}var L=class e{constructor(d,r,i){this.formBuilder=d;this.router=r;this.authService=i;this.loginForm=this.formBuilder.group({username:["",u.required],password:["",u.required]})}loginForm;loading=!1;submitted=!1;error="";ngOnInit(){this.authService.isAuthenticated()&&this.router.navigate(["/dashboard"])}get f(){return this.loginForm.controls}onSubmit(){this.submitted=!0,!this.loginForm.invalid&&(this.loading=!0,this.error="",this.authService.login(this.f.username.value,this.f.password.value).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:d=>{this.error=d.message||"Invalid username or password",this.loading=!1}}))}static \u0275fac=function(r){return new(r||e)(p(N),p(S),p(w))};static \u0275cmp=x({type:e,selectors:[["app-login"]],decls:33,vars:10,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username","placeholder","Enter username",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter password",1,"form-control"],[1,"demo-credentials"],[1,"btn","btn-primary","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/auth/signup"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"alert","alert-danger","mt-3"]],template:function(r,i){r&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Project Management Dashboard"),t(),n(4,"form",2),h("ngSubmit",function(){return i.onSubmit()}),n(5,"div",3)(6,"label",4),o(7,"Username"),t(),f(8,"input",5),s(9,W,2,1,"div",6),t(),n(10,"div",3)(11,"label",7),o(12,"Password"),t(),f(13,"input",8),s(14,Y,2,1,"div",6),t(),n(15,"div",9)(16,"p")(17,"strong"),o(18,"Demo Credentials:"),t()(),n(19,"p"),o(20,'Developer: username: "dev" / password: "dev123"'),t(),n(21,"p"),o(22,'Manager: username: "manager" / password: "manager123"'),t()(),n(23,"div",3)(24,"button",10),s(25,Z,1,0,"span",11),o(26," Login "),t()(),s(27,$,2,1,"div",12),n(28,"div",13)(29,"p"),o(30,"Don't have an account? "),n(31,"a",14),o(32,"Sign up"),t()()()()()()),r&2&&(a(4),m("formGroup",i.loginForm),a(4),c("is-invalid",i.submitted&&i.f.username.errors),a(),m("ngIf",i.submitted&&i.f.username.errors),a(4),c("is-invalid",i.submitted&&i.f.password.errors),a(),m("ngIf",i.submitted&&i.f.password.errors),a(10),m("disabled",i.loading),a(),m("ngIf",i.loading),a(2),m("ngIf",i.error))},dependencies:[g,C,k,E,y,P,I,O,F,M],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:8px;box-shadow:0 2px 10px #0000001a;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:30px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#555}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-top:5px}.btn[_ngcontent-%COMP%]{padding:12px;border:none;border-radius:4px;font-size:16px;cursor:pointer;width:100%}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#b3d7ff;cursor:not-allowed}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-top:20px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.demo-credentials[_ngcontent-%COMP%]{background-color:#e9ecef;padding:15px;border-radius:4px;margin-bottom:20px;font-size:14px}.demo-credentials[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.text-center[_ngcontent-%COMP%]{text-align:center}.spinner-border[_ngcontent-%COMP%]{display:inline-block;width:1rem;height:1rem;border:.2em solid currentColor;border-right-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_spinner-border .75s linear infinite}@keyframes _ngcontent-%COMP%_spinner-border{to{transform:rotate(360deg)}}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:20px}}"]})};function ee(e,d){e&1&&(n(0,"div"),o(1,"Username is required"),t())}function te(e,d){if(e&1&&(n(0,"div",16),s(1,ee,2,0,"div",17),t()),e&2){let r=l();a(),m("ngIf",r.f.username.errors==null?null:r.f.username.errors.required)}}function re(e,d){e&1&&(n(0,"div"),o(1,"Password is required"),t())}function ne(e,d){e&1&&(n(0,"div"),o(1,"Password must be at least 6 characters"),t())}function ie(e,d){if(e&1&&(n(0,"div",16),s(1,re,2,0,"div",17)(2,ne,2,0,"div",17),t()),e&2){let r=l();a(),m("ngIf",r.f.password.errors==null?null:r.f.password.errors.required),a(),m("ngIf",r.f.password.errors==null?null:r.f.password.errors.minlength)}}function oe(e,d){e&1&&(n(0,"div"),o(1,"Role is required"),t())}function ae(e,d){if(e&1&&(n(0,"div",16),s(1,oe,2,0,"div",17),t()),e&2){let r=l();a(),m("ngIf",r.f.role.errors==null?null:r.f.role.errors.required)}}function de(e,d){if(e&1&&(n(0,"div",16),o(1),t()),e&2){let r=l();a(),v(" ",r.error," ")}}var T=class e{constructor(d,r,i){this.formBuilder=d;this.router=r;this.authService=i;this.signupForm=this.formBuilder.group({username:["",u.required],password:["",[u.required,u.minLength(6)]],role:["",u.required]})}signupForm;loading=!1;submitted=!1;error="";get f(){return this.signupForm.controls}onSubmit(){this.submitted=!0,!this.signupForm.invalid&&(this.loading=!0,this.error="",this.authService.signup(this.f.username.value,this.f.password.value,this.f.role.value).subscribe({next:()=>{this.router.navigate(["/dashboard"])},error:d=>{this.error=d.message,this.loading=!1}}))}static \u0275fac=function(r){return new(r||e)(p(N),p(S),p(w))};static \u0275cmp=x({type:e,selectors:[["app-signup"]],decls:32,vars:13,consts:[[1,"auth-container"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["id","username","type","text","formControlName","username",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control"],["for","role"],["id","role","formControlName","role",1,"form-control"],["value",""],["value","dev"],["value","project-manager"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/auth/login"],[1,"error-message"],[4,"ngIf"]],template:function(r,i){r&1&&(n(0,"div",0)(1,"form",1),h("ngSubmit",function(){return i.onSubmit()}),n(2,"h2"),o(3,"Sign Up"),t(),n(4,"div",2)(5,"label",3),o(6,"Username"),t(),f(7,"input",4),s(8,te,2,1,"div",5),t(),n(9,"div",2)(10,"label",6),o(11,"Password"),t(),f(12,"input",7),s(13,ie,3,2,"div",5),t(),n(14,"div",2)(15,"label",8),o(16,"Role"),t(),n(17,"select",9)(18,"option",10),o(19,"Select Role"),t(),n(20,"option",11),o(21,"Developer"),t(),n(22,"option",12),o(23,"Project Manager"),t()(),s(24,ae,2,1,"div",5),t(),n(25,"button",13),o(26),t(),s(27,de,2,1,"div",5),n(28,"p",14),o(29," Already have an account? "),n(30,"a",15),o(31,"Login"),t()()()()),r&2&&(a(),m("formGroup",i.signupForm),a(6),c("error",i.submitted&&i.f.username.errors),a(),m("ngIf",i.submitted&&i.f.username.errors),a(4),c("error",i.submitted&&i.f.password.errors),a(),m("ngIf",i.submitted&&i.f.password.errors),a(4),c("error",i.submitted&&i.f.role.errors),a(7),m("ngIf",i.submitted&&i.f.role.errors),a(),m("disabled",i.loading),a(),v(" ",i.loading?"Loading...":"Sign Up"," "),a(),m("ngIf",i.error))},dependencies:[g,C,k,E,D,G,y,q,P,I,O,F,M],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.auth-form[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:8px;box-shadow:0 2px 10px #0000001a;width:100%;max-width:400px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ddd;border-radius:4px}.form-control.error[_ngcontent-%COMP%]{border-color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:5px}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;background:#007bff;color:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px}"]})};var me=[{path:"login",component:L},{path:"signup",component:T},{path:"",redirectTo:"login",pathMatch:"full"}],R=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=_({type:e});static \u0275inj=b({imports:[A.forChild(me),A]})};var B=class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=_({type:e});static \u0275inj=b({imports:[g,R]})};export{B as AuthModule};
